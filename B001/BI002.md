---

title: "BI学习-数据仓库架构分层"
scp: 2020/4/16 23:35:40
tags: BI  

---

# 数据仓库架构分层

标准的数据仓库分层：sd（源数据层），ods（中间存储层），dw（多维数据层），dm（数据集市层），app（应用层）  

**源数据层：** 源数据一般具有多来源、多类型特征，可能使用多种数据库，甚至是非结构化数据，是数据仓库中数据最复杂的一层，需要工程师对多种数据库多种数据类型都有一定了解。  

**中间存储层：** 中间层数据和源数据基本保持一致，保存着最细粒度的数据。中间层可以说是数据仓库最重要的一层，是所有后期分析的数据基础。中间存储层一般存放所有的明细数据，具有数据量大，查询计算较慢的特点,“面向主题的”，数据运营层是最接近数据源中数据的一层，数据源中的数据，经过抽取、洗净、传输，也就说传说中的ETL之后，装入本层。本层的数据，总体上大多是按照源头业务系统的分类方式而分类的。  

**多维数据层：** 多维数据层是经过清洗的，有价值的数据。多维数据层是在存储层的基础上清洗脏数据、删选有价值数据，并且对存储层的事实维度表进行事实维度分离。与中间存储层相比，多维数据层与存储层有着相同的数据粒度，但是具有更小的数据量、更快的查询速度。数据仓库的主体，在这里从ODS层中获得的数据按照主题建立各种数据模型。例如以研究人的旅游消费为主题的数据集中，便可以结合航空公司的登机出行信息，以及银联系统的刷卡记录，进行结合分析，产生数据集。在这里，我们需要了解四个概念：维（dimension）、事实（Fact）、指标（Index）和粒度（ Granularity）。
DM层：数据集市，从数据的时间跨度来说，通常是DW层的一部分，按照业务划分，如流量、订单、用户等，生成字段比较多的宽表，用于提供后续的业务查询，OLAP分析，数据分发等。

**数据集市层：** 它是面向主题轻度汇总的数据，在某主题的最细粒度数据，能满足该主题所有需求。数据集市是按照某一主题汇总，既可以由多维数据层汇总，也可是其他集市表进一步汇总，通常是星状、雪花状数据和网状模型。数据集市层主题明确，极大减少使用方理解及使用成本

**应用层：** 这一层就是大家看到的各种报表，一般都是在数据集市基础上按照各种特定维度汇总的结果。应用层是面向用户的，数据具有极快的响应速度。在这里，主要是提供给数据产品和数据分析使用的数据，一般会存放在es、mysql等系统中供线上系统使用，也可能会存在Hive或者Druid中供数据分析和数据挖掘使用。比如我们经常说的报表数据，或者说那种大宽表，一般就放在这里。

# 数据仓库和数据集市的区别  

a. 数据仓库向各个数据集市提供数据  
b. 几个部门的数据集市组成一个数据仓库  
c. 从数据内容的特征上,数据仓库采用规范化模式,数据集市中的数据一般为星型或者雪花型,数据集市的粒度一般比数据仓库要粗  
