---

title: "BI学习-事务"
scp: 2020/4/16 23:35:40
tags: BI

---

# 事务(transaction)  

## 定义
事务是由一系列对系统中的数据进行访问和更新的操作所组成的一个程序执行逻辑单元.狭义上的事务指数据库事务.  
一方面,当多个应用程序访问数据库时,事务可以在这些应用程序直接提供一个隔离方法,以防止彼此的操作互相干扰.  
另一方面,事务为数据库操作提供一个从失败中恢复正常状态的方法,同时提供了数据库即使在异常状态仍能保持数据一致性的方法.  

## 特性(ACID)  

### 原子性 Atomicity  

指事务必须是一个原子的操作序列单元,事务包含的各项操作在一次执行过程中,只允许出现两种状态之一:  

* 全部执行成功;  
* 全部不执行;  

任何一项操作失败都将导致整个事务失败,同时其他已执行的操作都将撤销并回滚,只有所有操作全部成功,整个事务才算完成.  

### 一致性 Consistency  

指事务的执行不能破坏数据库的完整性和一致性,一个事务在执行前后,数据库都必须处于一致性的状态.也就是说,事务执行的结果必须是
使数据库从一个一致性状态转变到另一个一致性状态,因此当数据库只包含成功事务的提交结果时,就能说数据库处于一致性状态.  

### 隔离性 Isolation  

事务的隔离性指在并发环境中, 并发的事务是互相隔离的,一个事务的执行不能被其他事务干扰.也就是说,不同的事务操作相同的数据时,每个事务都
有自己的数据空间,即一个事务内部的操作及使用的数据对其他事务是隔离的.  

标准SQL规范中,定义了4个事务隔离级别:

* 未授权读取  
未授权读取也被称为读未提交(Read uncommitted),其隔离级别最低,允许脏读取,即如果一个事务正在处理某一数据并对其进行了更新,但尚未完成事务,
因此还没有进行事务提交,此时还允许另一个事务能够访问数据.  

* 授权读取  
授权读取也被称之为读已提交(Read committed),它和授权读取非常接近,唯一的区别就是授权读取只允许读取已提交的数据.  

* 可重复读取  
可重复读取(Repeatable Read),保证在事务处理的过程中,多次读取同一个数据时其值和事务开始时刻是一致的,
因此该事务级别禁止了不可重复读取和脏读取,但是有可能出现幻影数据.  

* 串行化  
要求所有的事务都被串行处理  

| 隔离级别 | 脏读 | 可重复读 | 幻读 |
| - | - | - | - |
| 未授权读取 | 存在 | 不可以 | 存在 |
|授权读取|不存在|不可以|存在|
|可重复读取|不存在|可以|存在|
|串行化|不存在|可以|不存在|

### 持久性 Durability  

事务的持久性也被称之为永久性,即事务一旦被提交,它对数据库的状态的变更就应该是永久的  
